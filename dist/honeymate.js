!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=function(e,t){return new Promise(function(n){for(var r in t)e.style[r]=t[r];n()})},i=!0,o=function(e,t){t.opacity="ease-out";var n="";return Object.keys(t).forEach(function(r){n+="".concat(r," ").concat(e,"ms ").concat(t[r],", ")}),n.substring(0,n.length-2)},a=/url\(\s*(['"]?)(.*)\1\s*\)/,c=function(e){var t=getComputedStyle(e);if(""!==t.background||""!==t.backgroundImage){var n=t.background.match(a);return n?n[2]:""}return""},s=function(e){return new Promise(function(t){var n=Array.from(e.querySelectorAll("*"));n.push(e);var r=function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if("IMG"===s.tagName)t.push(s.getAttribute("src"));else{var u=c(s);u&&t.push(u)}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(n);if(0===r.length)t(0);else{var i=[];r.forEach(function(e){i.push(function(e){return new Promise(function(t){var n=new Image;n.onload=t,n.onerror=t,n.src=e})}(e))}),Promise.all(i).then(function(){t(r.length)})}})},u=function(){function t(n){e(this,t),n.style.opacity=0,this.node=n,this.node.classList.add("honey_ready"),this.options=n.dataset}return n(t,[{key:"isLoaded",value:function(){var e=this;return new Promise(function(t){s(e.node).then(function(){return setTimeout(function(){return t()},e.parameters.hold)})})}},{key:"animate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.effect;r(this.node,t).then(function(){e.isLoaded().then(function(){setTimeout(function(){e.expose()},e.parameters.delay)})})}},{key:"expose",value:function(){var e=this;r(this.node,{transform:"",opacity:1}).then(function(){var t;e.parameters.spin&&(t=e.spinner,requestAnimationFrame(function(){t.style.opacity=0,setTimeout(function(){document.body.removeChild(t)},1500)}))})}},{key:"options",set:function(e){var t;this.parameters={direction:function(e){return e.right?2:e.down?3:e.left?4:1}(t=e),duration:t.duration||"640",effect:t.effect||"fade",delay:parseInt(t.delay,10)||0,hold:parseInt(t.hold,10)||0,scale:t.scale||".87",await:t.await||null,origin:t.origin||"bottom",offset:t.up||t.down||t.left||t.right?t.up||t.down||t.left||t.right:32,spin:"true"===t.spin,spinColor:t["spin-color"]||"#000",spinSize:t["spin-size"]||"24",continue:"true"===t.continue},this.effect=function(e){var t,n,r,i=e.duration,a={};switch(e.effect){case"zoom":a.transition=o(i,{transform:"cubic-bezier(0,.7,.3,1)"}),a.transform="scale(".concat(e.scale,")");break;case"helix":a.transition=o(i,{transform:"cubic-bezier(0,.75,.25,1)"}),a.transform="scale(".concat(e.scale,") rotate(90deg)");break;case"slide":a.transition=o(i,{transform:"cubic-bezier(0,.9,.1,1)"}),a.transform=(t=e.direction,n=e.offset,r=1===t||3===t?"Y":"X","translate".concat(r+=1===t||2===t?"(-":"(").concat(n,"px)")),a.transformOrigin=e.origin;break;case"relax":a.transition=o(i,{transform:"cubic-bezier(0,0,.001,1)"}),a.transform="scaleY(".concat(e.scale,")"),a.transformOrigin=e.origin;break;default:case"fade":a.transition=o(i,{})}return a}(this.parameters),this.parameters.spin&&(this.spinner=function(e){if(i){var t=document.createElement("style");t.innerHTML="@keyframes honeySpin{0%{transform:rotate(-360deg)}to{transform:rotate(360deg)}}",document.head.appendChild(t),i=!1}var n,o,a=e.node,c=e.parameters,s=a.getBoundingClientRect(),u=document.createElement("div");return u.innerHTML=(n=c.spinSize,o=c.spinColor,'<svg width="'.concat(n,'" height="').concat(n,'" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="animation: honeySpin 1.7s linear infinite"><circle cx="50" cy="50" fill="none" stroke="').concat(o,'" stroke-width="10" r="35" stroke-dasharray="90 60"></circle></svg>')),r(u,{position:"absolute",top:s.top+document.documentElement.scrollTop+"px",left:s.left+document.documentElement.scrollLeft+"px",width:a.offsetWidth+"px",height:a.offsetHeight+"px",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity .23s ease-out"}).then(function(){return document.body.appendChild(u)}),u}(this))},get:function(){return this.parameters}}]),t}(),f=new Map,l=function(e){if(f.has(e))return f.get(e);var t=new u(e);return f.set(e,t),t},d=function(e,t){if(e.continue&&t>1)return function(e){return f.get(Array.from(f.keys())[e])}(t-1);if(e.await){var n=document.getElementById(e.await);return n?l(n):-1}return-1},m=function(){function t(){e(this,t)}return n(t,null,[{key:"initiate",value:function(){for(var e=document.querySelectorAll(".honey"),t=function(t){var n=l(e[t]),r=d(n.parameters,t);-1===r?n.animate():r.isLoaded().then(function(){setTimeout(function(){return n.animate()},n.parameters.hold)})},n=0;n<e.length;n++)t(n)}},{key:"generateNode",value:function(e){return new u(e)}}]),t}();window.Honeymate=m,document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("style");e.innerHTML=".honey{opacity:0}",document.head.appendChild(e),m.initiate()})}();
